sources:
  - name: jaffle_shop # we typically want to have name of the source to be the schema name/dataset name
    database: dbt-fundamentals-course-479017  # dbt assumes the target DB is the same as source --> if not --> this line is needed
    schema: jaffle_shop # dbt assumes that schema name is the same as name, BUT its good the be verbose + if they were different the name would be alias
    tables:   # data objects we are specifically connecting in the project --> these are used in the source macro (!)
      - name: customers_source
        config:
          freshness:
            warn_after: {count: 48, period: hour}  # alternative dict way to write it
      - name: orders_source
        config:             # freshness checks can be done on both source and table level
          freshness:        # this will help to check whether its needed to reload a stagging model (if the data is new or not)
            warn_after:
              count: 24     # after how many units...
              period: hour  # ... after what units
            # error_after:
            #   count: 48
            #   period: hour  # run dbtf source freshness --> checks the freshness (seems that dbt found the timestamp/loaded_at_field by itself in BQ)
            # COMMENTING OUT due to my fixed setup (BQ wont allow me to use the tables they use bcs they are theirs --> just created my own)
          loaded_at_field: _etl_loaded_at      # ... but we can specifically define the column if needed
      - name: payments_source
        config:
          loaded_at_field: _batched_at
          freshness:
            warn_after: {count: 24, period: hour}